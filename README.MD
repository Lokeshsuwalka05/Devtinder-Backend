# DevTinder â€” Backend ğŸš€

<div align="center">

![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=for-the-badge&logo=node.js&logoColor=white)
![Express](https://img.shields.io/badge/Express-5.x-000000?style=for-the-badge&logo=express&logoColor=white)
![MongoDB](https://img.shields.io/badge/MongoDB-Atlas-47A248?style=for-the-badge&logo=mongodb&logoColor=white)
![Socket.io](https://img.shields.io/badge/Socket.io-4.x-010101?style=for-the-badge&logo=socket.io&logoColor=white)
![AWS](https://img.shields.io/badge/AWS-SES-FF9900?style=for-the-badge&logo=amazon-aws&logoColor=white)

**Production-ready Node.js backend powering the DevTinder developer-matching platform**

[Live API](https://thedevtinder.live/api) â€¢ [Frontend Repo](https://github.com/Lokeshsuwalka05/Devtinder-Backend) â€¢ [Documentation](#-api--socket-endpoints) â€¢ [Report Bug](https://github.com/Lokeshsuwalka05/Devtinder-Backend/issues)

</div>

---

## ğŸ“– About The Project

DevTinder Backend is a comprehensive microservices-ready Node.js application that powers a developer-matching and collaboration platform. Built with scalability, security, and real-time communication at its core, this service handles authentication, real-time chat, payment processing, email delivery, and scheduled background tasks.

### âš ï¸ **100% Human-Written Code**

> Every single line of code in this repository is manually crafted by me â€” no AI assistance, no code generators, no shortcuts. This represents authentic software engineering and deep understanding of backend architecture.

---

## ğŸŒŸ Key Features

<table>
<tr>
<td width="50%">

### ğŸ” Secure Authentication

- JWT-based authentication system
- Password hashing with bcrypt
- Protected route middleware
- Session management with cookies

### ğŸ’¬ Real-time Chat

- Socket.io powered messaging
- Room-based conversations
- Typing indicators & presence
- Message persistence

### ğŸ’³ Payment Integration

- Razorpay order creation
- Webhook verification
- Secure payment processing
- Transaction logging

</td>
<td width="50%">

### ğŸ“§ Email Service

- AWS SES integration
- Transactional emails
- Email templates
- Delivery tracking

### â° Scheduled Tasks

- Cron job automation
- Data cleanup routines
- Reminder notifications
- Report generation

### ğŸ›¡ï¸ Security Features

- Input validation
- CORS protection
- XSS prevention
- Rate limiting ready

</td>
</tr>
</table>

---

## ğŸ—ï¸ Architecture Overview

```mermaid
graph TB
    Client[Client Applications]
    API[Express API Server]
    Socket[Socket.io Server]
    Auth[Auth Middleware]
    DB[(MongoDB Atlas)]
    SES[AWS SES]
    RZP[Razorpay]
    Cron[Cron Jobs]

    Client -->|HTTP/HTTPS| API
    Client -->|WebSocket| Socket
    API --> Auth
    Auth --> DB
    API --> DB
    Socket --> DB
    API --> SES
    API --> RZP
    Cron --> DB
    Cron --> SES

    style API fill:#4CAF50
    style Socket fill:#00BCD4
    style DB fill:#FF9800
    style Auth fill:#F44336
```

---

## ğŸ“‚ Project Structure

<img src="https://img.icons8.com/fluency/48/folder-tree.png" alt="Folder Structure" width="30"/> **Organized for scalability and maintainability**

```
src/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ Database.js              # MongoDB connection setup
â”œâ”€â”€ middlewares/
â”‚   â””â”€â”€ auth.js                  # JWT verification middleware
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ chat.js                  # Chat schema & methods
â”‚   â”œâ”€â”€ connectionRequest.js     # Connection request schema
â”‚   â”œâ”€â”€ payment.js               # Payment transaction schema
â”‚   â””â”€â”€ user.js                  # User profile schema
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js                  # Authentication endpoints
â”‚   â”œâ”€â”€ chat.js                  # Chat REST endpoints
â”‚   â”œâ”€â”€ payment.js               # Payment endpoints
â”‚   â”œâ”€â”€ profile.js               # User profile management
â”‚   â”œâ”€â”€ requests.js              # Connection request handling
â”‚   â””â”€â”€ user.js                  # User operations
â””â”€â”€ utils/
    â”œâ”€â”€ cronJob.js               # Scheduled task definitions
    â”œâ”€â”€ razorpay.js              # Razorpay client setup
    â”œâ”€â”€ sendEmail.js             # Email sending logic
    â”œâ”€â”€ sesClient.js             # AWS SES client
    â”œâ”€â”€ sockets.js               # Socket.io event handlers
    â”œâ”€â”€ validation.js            # Input validation functions
    â””â”€â”€ app.js                   # Express app initialization
```

**Architecture Philosophy:** Modular design with clear separation between routes, business logic, data models, and utilities. Each layer is independent and testable.

---

## ğŸ› ï¸ Tech Stack

<table>
<tr>
<td valign="top" width="50%">

### Core Technologies

- **Node.js** â€” JavaScript runtime
- **Express 5** â€” Web framework
- **MongoDB** â€” NoSQL database
- **Mongoose** â€” ODM for MongoDB

### Authentication & Security

- **jsonwebtoken** â€” JWT implementation
- **bcrypt** â€” Password hashing
- **cookie-parser** â€” Cookie handling
- **validator** â€” Input validation

</td>
<td valign="top" width="50%">

### Real-time & Communication

- **Socket.io** â€” WebSocket library
- **@aws-sdk/client-ses** â€” Email service
- **cors** â€” CORS middleware

### Payment & Scheduling

- **Razorpay** â€” Payment gateway
- **node-cron** â€” Task scheduler
- **date-fns** â€” Date utilities

</td>
</tr>
</table>

---

## ğŸš€ Getting Started

### Prerequisites

```bash
Node.js >= 18.x
MongoDB Atlas account (or local MongoDB)
AWS account with SES configured
Razorpay account (test/live credentials)
```

### Installation

1ï¸âƒ£ **Clone the repository**

```bash
git clone https://github.com/Lokeshsuwalka05/Devtinder-Backend.git
cd Devtinder-Backend
```

2ï¸âƒ£ **Install dependencies**

```bash
npm install
# or
npm ci  # for production
```

3ï¸âƒ£ **Set up environment variables**

Create a `.env` file in the project root:

```env
# Database
MONGODB_URI=mongodb+srv://<user>:<password>@cluster0.mongodb.net/devtinder?retryWrites=true&w=majority

# Authentication
JWT_SECRET=your_super_secure_jwt_secret_key_here

# AWS SES Configuration
AWS_SES_ACCESS_KEY=AKIA...
AWS_SES_SECRET_ACCESS_KEY=your_aws_secret_key

# Razorpay
Razorpay_key_secret=rzp_live_xxx_or_rzp_test_xxx
Razorpay_webhook_secret=whsec_xxx

# Server
PORT=5000
NODE_ENV=development
```

> âš ï¸ **Security Note:** Never commit `.env` to version control. Add it to `.gitignore`.

4ï¸âƒ£ **Start the development server**

```bash
npm start
```

The API will be running at `http://localhost:5000`

---

## ğŸ”Œ API & Socket Endpoints

### ğŸ” Authentication Routes

| Method | Endpoint  | Description       | Auth Required |
| ------ | --------- | ----------------- | ------------- |
| POST   | `/signup` | Register new user | âŒ            |
| POST   | `/login`  | User login        | âŒ            |
| POST   | `/logout` | User logout       | âœ…            |

### ğŸ‘¤ Profile & User Routes

| Method | Endpoint          | Description                    | Auth Required |
| ------ | ----------------- | ------------------------------ | ------------- |
| GET    | `/profile/view`   | Get authenticated user profile | âœ…            |
| PATCH  | `/profile/edit`   | Update user profile            | âœ…            |
| PATCH  | `/patch/password` | Change password                | âœ…            |
| GET    | `/user/:id`       | Get public user profile        | âœ…            |

### ğŸ¤ Connection Routes

| Method | Endpoint                 | Description             | Auth Required |
| ------ | ------------------------ | ----------------------- | ------------- |
| POST   | `/request/send`          | Send connection request | âœ…            |
| POST   | `/request/review`        | Accept/Reject request   | âœ…            |
| GET    | `/user/request/received` | List received requests  | âœ…            |
| GET    | `/user/connections`      | List all connections    | âœ…            |

### ğŸ“° Feed Routes

| Method | Endpoint | Description   | Auth Required |
| ------ | -------- | ------------- | ------------- |
| GET    | `/feed`  | Get user feed | âœ…            |

### ğŸ’¬ Chat Routes

| Method | Endpoint | Description           | Auth Required |
| ------ | -------- | --------------------- | ------------- |
| GET    | `/chat`  | Get chat history/list | âœ…            |

### ğŸ’³ Payment Routes

| Method | Endpoint           | Description              | Auth Required |
| ------ | ------------------ | ------------------------ | ------------- |
| POST   | `/create/order`    | Create Razorpay order    | âœ…            |
| POST   | `/payment/webhook` | Razorpay webhook handler | âŒ            |

### ğŸ”Œ Socket.io Events

```javascript
// Client â†’ Server
socket.emit("joinRoom", { roomId, userId });
socket.emit("message", { roomId, message, senderId });
socket.emit("typing", { roomId, userId, isTyping });

// Server â†’ Client
socket.on("message", (data) => {
  /* New message */
});
socket.on("userJoined", (data) => {
  /* User joined room */
});
socket.on("userLeft", (data) => {
  /* User left room */
});
socket.on("typing", (data) => {
  /* Typing indicator */
});
```

> ğŸ“ **Detailed API documentation available in `api-list.md`**

---

## ğŸ”’ Security Best Practices

<table>
<tr>
<td width="50%">

### Implemented Security Measures

âœ… **JWT Authentication** with secure secret rotation  
âœ… **Password Hashing** using bcrypt (10 rounds)  
âœ… **Input Validation** on all endpoints  
âœ… **CORS Configuration** with whitelist  
âœ… **HTTP-only Cookies** for token storage  
âœ… **Webhook Verification** for Razorpay  
âœ… **Environment Variables** for secrets

</td>
<td width="50%">

### Production Checklist

ğŸ”’ Use HTTPS only in production  
ğŸ”’ Set secure cookie flags (`Secure`, `HttpOnly`, `SameSite`)  
ğŸ”’ Implement rate limiting (express-rate-limit)  
ğŸ”’ Enable MongoDB IP whitelist  
ğŸ”’ Rotate JWT secrets periodically  
ğŸ”’ Monitor failed login attempts  
ğŸ”’ Use AWS IAM roles for SES

</td>
</tr>
</table>

---

## ğŸŒ Deployment Guide (AWS EC2)

### Infrastructure Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CloudFlare    â”‚  â† DNS & DDoS Protection
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS EC2 Ubuntu â”‚  â† Application Server
â”‚   + Nginx       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚          â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚MongoDBâ”‚ â”‚ SES  â”‚ â”‚Razorpay  â”‚ â”‚Socket.ioâ”‚
â”‚ Atlas â”‚ â”‚      â”‚ â”‚          â”‚ â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step-by-Step Deployment

**1. Provision EC2 Instance**

```bash
# Ubuntu 22.04 LTS
# t2.medium or higher recommended
# Open ports: 22, 80, 443, 5000
```

**2. Install Node.js & Dependencies**

```bash
# Update system
sudo apt update && sudo apt upgrade -y

# Install Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# Install PM2 globally
sudo npm install -g pm2

# Install Nginx
sudo apt install -y nginx
```

**3. Deploy Application**

```bash
# Clone repository
git clone https://github.com/Lokeshsuwalka05/Devtinder-Backend.git
cd Devtinder-Backend

# Install dependencies
npm ci --production

# Set up environment variables
nano .env  # Add your production env vars

# Start with PM2
pm2 start src/app.js --name devtinder-backend
pm2 save
pm2 startup  # Enable auto-restart on reboot
```

**4. Configure Nginx as Reverse Proxy**

```nginx
# /etc/nginx/sites-available/devtinder-backend
server {
    listen 80;
    server_name api.thedevtinder.live;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

```bash
# Enable site
sudo ln -s /etc/nginx/sites-available/devtinder-backend /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

**5. Set Up SSL with Let's Encrypt**

```bash
sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx -d api.thedevtinder.live
```

**6. Monitor & Maintain**

```bash
# View logs
pm2 logs devtinder-backend

# Monitor performance
pm2 monit

# Restart application
pm2 restart devtinder-backend
```

---

## ğŸ“Š Performance Optimization

- âœ… **Database Indexing** â€” Optimized queries with compound indexes
- âœ… **Connection Pooling** â€” MongoDB connection reuse
- âœ… **Compression** â€” Response compression middleware
- âœ… **Caching Strategy** â€” Redis-ready architecture
- âœ… **Load Balancing** â€” PM2 cluster mode support

---

## ğŸ§ª Testing

```bash
# Run tests (if implemented)
npm test

# Test with curl
curl -X POST http://localhost:5000/signup \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"Test123!"}'

# Socket.io testing with Postman or Socket.io client library
```

---

## ğŸ“¦ Dependencies

<details>
<summary><b>View Complete Dependency List</b></summary>

```json
{
  "@aws-sdk/client-ses": "^3.x",
  "bcrypt": "^5.x",
  "cookie-parser": "^1.x",
  "cors": "^2.x",
  "date-fns": "^2.x",
  "dotenv": "^16.x",
  "express": "^5.x",
  "jsonwebtoken": "^9.x",
  "mongoose": "^7.x",
  "node-cron": "^3.x",
  "razorpay": "^2.x",
  "socket.io": "^4.x",
  "validator": "^13.x"
}
```

</details>

---

## ğŸ¤ Contributing

This is my personal implementation where every line is hand-coded. Contributions are welcome!

### How to Contribute

1. ğŸ´ Fork the repository
2. ğŸŒ¿ Create a feature branch (`git checkout -b feature/AmazingFeature`)
3. âœï¸ Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. ğŸ“¤ Push to the branch (`git push origin feature/AmazingFeature`)
5. ğŸ‰ Open a Pull Request

**Code Standards:**

- Follow existing code style
- Add comments for complex logic
- Update documentation for API changes
- Test thoroughly before submitting

---

## ğŸ“„ License

**License:** ISC

**Author:** Lokesh Suwalka â€” Every line of code written by me (not AI-generated)

---

## ğŸ“¬ Contact & Support

<div align="center">

**Lokesh Suwalka**

[![GitHub](https://img.shields.io/badge/GitHub-Lokeshsuwalka05-181717?style=for-the-badge&logo=github)](https://github.com/Lokeshsuwalka05)
[![Email](https://img.shields.io/badge/Email-support@thedevtinder.live-D14836?style=for-the-badge&logo=gmail&logoColor=white)](mailto:support@thedevtinder.live)
[![Website](https://img.shields.io/badge/Website-thedevtinder.live-4285F4?style=for-the-badge&logo=google-chrome&logoColor=white)](https://thedevtinder.live)

**Found a bug?** [Open an issue](https://github.com/Lokeshsuwalka05/Devtinder-Backend/issues)

</div>

---

## ğŸ¯ Roadmap

- [ ] Implement Redis caching layer
- [ ] Add comprehensive test suite
- [ ] GraphQL API endpoint
- [ ] Docker containerization
- [ ] Kubernetes deployment configs
- [ ] CI/CD pipeline with GitHub Actions
- [ ] API rate limiting
- [ ] Request logging with Winston

---

## ğŸ“š Additional Resources

- ğŸ“– [Detailed API Documentation](./api-list.md)
- ğŸ¥ [Video Tutorial](#) _(Coming Soon)_
- ğŸ“ [Blog Post: Building DevTinder](#) _(Coming Soon)_
- ğŸ³ [Docker Setup Guide](#) _(Coming Soon)_

---

<div align="center">

### â­ Star this repo if you find it useful!

**Built with â¤ï¸ and â˜• by [Lokesh Suwalka](https://github.com/Lokeshsuwalka05)**

_Connecting developers, one line of code at a time_

</div>
